# Tool Prompts
# These prompts are used by various agent tools

knowledge_base_synthesis: |
  You are a helpful assistant that synthesizes information from a knowledge base.

  User Query: {query}

  Retrieved Information from Knowledge Base:
  {combined_content}

  Sources:
  - {sources_list}

  Your task:
  1. Analyze the retrieved information
  2. Extract the most relevant parts that answer the user's query
  3. Format it in a clear, well-structured way suitable for a JIRA ticket description
  4. Use proper Markdown formatting with headers (##, ###), bullet points, and numbered lists
  5. Create logical sections (e.g., Overview, Steps, Requirements, Details)
  6. Be concise but comprehensive - focus on what's relevant to "{query}"
  7. DO NOT include meta-information about sources or scores
  8. Format it professionally and make it ready to use directly

  prepare a detailed professionally formated response

jql_generation: |
  Convert this natural language query to JIRA Query Language (JQL).

  Query: "{query}"

  JQL Syntax Reference:
  - Field operators: =, !=, ~, !~, >, <, >=, <=, IN, NOT IN, IS, IS NOT
  - Text search: summary ~ "keyword" or text ~ "keyword" (contains)
  - Issue types: type = Bug, type = Story, type = Task, type = Epic, type = "Sub-task"
  - Status: status = "In Progress", status = Done, status = "To Do", status IN ("In Progress", "In Review")
  - Priority: priority = High, priority = Critical, priority = Medium, priority = Low
  - Labels: labels = "bug-fix", labels IN ("urgent", "frontend")
  - Components: component = "Backend", component IN ("API", "Database")
  - Assignee: assignee = currentUser(), assignee = "John Doe", assignee IS EMPTY
  - Reporter: reporter = currentUser(), reporter = "Jane Doe"
  - Date functions: created >= -7d (last 7 days), created >= startOfWeek(), updated >= -1w
  - Sprint: sprint IN openSprints(), sprint = "Sprint 5"
  - Resolution: resolution = Unresolved, resolution IS EMPTY
  - Logical operators: AND, OR, NOT
  - Ordering: ORDER BY created DESC, ORDER BY priority ASC

  Examples:
  - "high priority bugs" -> type = Bug AND priority IN (High, Critical) ORDER BY priority DESC
  - "my open tasks" -> assignee = currentUser() AND resolution = Unresolved AND type = Task
  - "bugs created this week" -> type = Bug AND created >= startOfWeek() ORDER BY created DESC
  - "stories in progress" -> type = Story AND status = "In Progress"
  - "unassigned tickets" -> assignee IS EMPTY AND resolution = Unresolved
  - "issues with label frontend" -> labels = "frontend"
  - "critical issues updated recently" -> priority = Critical AND updated >= -3d
  - "epics in backlog" -> type = Epic AND status = Backlog

  Rules:
  1. Always include ORDER BY for better results (prefer created DESC or priority DESC)
  2. Use proper quoting for values with spaces
  3. Use resolution = Unresolved for open issues
  4. Be generous with interpretation - if user mentions "bugs", include type = Bug
  5. If query mentions time ("recent", "this week", "today"), use appropriate date functions
  6. For vague queries, create a broad but sensible JQL

  Return ONLY the JQL query, nothing else. No explanation, no markdown.
