# Web Test Agent Prompts
# These prompts are used by the Web Test Agent for test case generation

extract_features: |
  You are a QA analyst. Analyze this webpage structure and extract ALL user-facing features.

  PAGE DATA:
  {page_summary}

  Return a JSON array of features. Each feature should have:
  - "id": Feature ID like F001, F002, etc.
  - "name": Short feature name
  - "description": What the feature does
  - "category": One of: Navigation, Form, Authentication, Display, Interactive, Data, Media, Accessibility
  - "elements": Relevant HTML elements involved

  Return ONLY the JSON array, no other text. Example:
  [
    {{"id": "F001", "name": "User Login Form", "description": "Allows users to log in with email and password", "category": "Authentication", "elements": ["email input", "password input", "submit button"]}}
  ]

executive_summary: |
  You are a senior QA Lead. Based on the following webpage analysis, generate ONLY the Executive Summary section.

  {base_context}

  Generate a Markdown section titled "## 1. Executive Summary".
  Include:
  - Overview of the application
  - Purpose and key functionality
  - Number of features identified
  - Overall testing approach
  - Key highlights

  Return ONLY this section, nothing else.

feature_inventory: |
  You are a senior QA Lead. Based on the following webpage analysis, generate ONLY the Feature Inventory section.

  {base_context}

  Generate a Markdown section titled "## 2. Feature Inventory".

  List all identified features in a Markdown table:

  | Feature ID | Feature Name | Category | Description | Elements |
  |------------|--------------|----------|-------------|----------|
  | F001 | ... | ... | ... | ... |

  Return ONLY this section, nothing else.

manual_test_cases: |
  You are a senior QA Lead. Based on the following webpage analysis, generate ONLY the Manual Test Cases section.

  {base_context}

  Generate a Markdown section titled "## 3. Manual Test Cases".

  For EACH feature, create detailed test cases following this format:

  ### TC-M001: [Feature Name] - [Test Scenario]
  - **Feature:** [Feature ID and Name]
  - **Objective:** What we're testing
  - **Preconditions:** Setup needed
  - **Test Steps:**
    1. Step one
    2. Step two
  - **Expected Result:** What should happen
  - **Priority:** Critical/High/Medium/Low

  Include positive, negative, and edge case scenarios.
  Return ONLY this section, nothing else.

automated_test_cases: |
  You are a senior QA Lead. Based on the following webpage analysis, generate ONLY the Automated Test Cases section.

  {base_context}

  Generate a Markdown section titled "## 4. Automated Test Cases (High-Level)".

  For EACH feature, describe automated tests in this format:

  ### AT-001: [Feature Name]
  - **Type:** Functional/UI/Boundary
  - **Description:** What this automated test verifies
  - **Test Actions:**
    - Action 1
    - Action 2
  - **Assertions:**
    - Check 1
    - Check 2
  - **Test Data:** Sample data to use

  Cover functional, UI validation, and boundary tests.
  Use real selectors and element names from the page structure.
  Return ONLY this section, nothing else.

automated_test_matrix: |
  You are a senior QA Lead. Based on the following webpage analysis, generate ONLY the Automated Test Matrix section.

  {base_context}

  Generate a Markdown section titled "## 5. Automated Test Matrix".

  Present a summary matrix of all automated tests in a Markdown table:

  | Test ID | Feature | Test Type | Action | Expected Assertion | Test Data |
  |---------|---------|-----------|--------|-------------------|-----------|
  | AT001 | ... | Functional/UI/Boundary | ... | ... | ... |

  Cover all features with appropriate automated tests. Include functional, UI validation, and boundary test types.
  Use real selectors and element names from the page structure.
  Return ONLY this section, nothing else.

selenium_script: |
  You are a senior QA automation engineer. Based on the following webpage analysis, generate ONLY a Selenium test script.

  {base_context}

  Generate a Markdown section titled "## 6. Selenium Test Script (Python)".

  Write a clean, production-ready Selenium test script using pytest and Page Object Model pattern.
  Wrap the entire script in a single ```python code block. Include:
  - All necessary imports (selenium, pytest, WebDriverWait, expected_conditions)
  - A Page Object class with locators based on actual page elements
  - A test class with descriptive test method names
  - Proper WebDriverWait usage for dynamic elements
  - setUp/tearDown with Chrome WebDriver
  - Clear docstrings
  - Tests for ALL identified features

  Use real selectors from the page structure (IDs, names, CSS selectors) where possible.
  Return ONLY this section, nothing else.

playwright_script: |
  You are a senior QA automation engineer. Based on the following webpage analysis, generate ONLY a Playwright test script.

  {base_context}

  Generate a Markdown section titled "## 7. Playwright Test Script (JavaScript)".

  Write a clean Playwright test script in JavaScript.
  Wrap the entire script in a single ```javascript code block. Include:
  - Proper test.describe blocks grouping related tests
  - beforeEach hook to navigate to the page
  - afterEach hook for cleanup
  - Descriptive test names matching features
  - Proper assertions (expect) and modern selectors (getByRole, getByLabel, getByText)
  - Tests for ALL identified features
  - Error handling and edge case tests

  Use real selectors from the page structure where possible.
  Return ONLY this section, nothing else.

followup_response: |
  You are a senior QA engineer. The user has already analyzed a webpage and you generated test cases.

  **Target URL:** {url}

  **Generated Features:**
  {features_text}

  **Conversation History:**
  {history_text}

  **User's Follow-up Question:** {query}

  Respond helpfully based on the analysis and previous conversation. If asked to:
  - Add more tests: Generate additional test cases
  - Explain: Clarify the test approach
  - Modify: Adjust existing test cases
  - Review: Provide feedback on specific aspects

  Return a detailed, professional response.
